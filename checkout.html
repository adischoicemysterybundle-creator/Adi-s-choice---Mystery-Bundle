<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Checkout – Adi’s Choice</title>
<link rel="stylesheet" href="style.css" />
<style>
body {
font-family: "Poppins", sans-serif;
background-color: #fffaf2;
color: #333;
margin: 0;
padding: 0;
}
header {
text-align: center;
padding: 20px;
}
header img {
width: 120px;
}
h1 {
text-align: center;
color: #b28d2d;
}
form {
max-width: 600px;
margin: 20px auto;
background: #fff;
padding: 25px;
border-radius: 10px;
box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}
label {
font-weight: 600;
display: block;
margin-bottom: 6px;
}
input, select, textarea {
width: 100%;
padding: 10px;
margin-bottom: 15px;
border-radius: 6px;
border: 1px solid #ccc;
font-size: 14px;
}
textarea {
resize: vertical;
min-height: 70px;
}
.order-summary {
background: #fff8e1;
border: 1px solid #e0c96b;
padding: 15px;
border-radius: 8px;
margin-bottom: 20px;
}
button {
width: 100%;
background-color: #b28d2d;
color: #fff;
padding: 15px;
border: none;
border-radius: 6px;
font-size: 16px;
cursor: pointer;
transition: 0.3s;
}
button:hover {
background-color: #9c7a24;
}
</style>
</head>
<body>
<header>
<img src="logo.jpeg" alt="Adi’s Choice Logo">
</header>

<h1>Checkout</h1>

<form id="checkout-form">
<div class="order-summary">
<h3>Order Summary</h3>
<p id="bundleName"></p>
<p id="bundlePrice"></p>
</div>

<label for="name">Full Name</label>
<input type="text" id="name" name="name" required />

<label for="email">Email Address</label>
<input type="email" id="email" name="email" required />

<label for="phone">Phone Number</label>
<input type="tel" id="phone" name="phone" required placeholder="+48 600 000 000" />

<label for="address">Street Address</label>
<input type="text" id="address" name="address" required />

<label for="city">City</label>
<input type="text" id="city" name="city" required />

<label for="postal">Postal Code</label>
<input type="text" id="postal" name="postal" required />

<label for="country">Country</label>
<input type="text" id="country" name="country" required />

<label for="delivery">Delivery Method</label>
<select id="delivery" name="delivery" required>
<option value="">Select delivery method</option>
<option value="DPD">DPD</option>
<option value="InPost">InPost</option>
<option value="DHL">DHL</option>
<option value="Poczta Polska">Poczta Polska</option>
</select>

<label for="additionalInfo">Additional Info (e.g. preferred colors)</label>
<textarea id="additionalInfo" name="additionalInfo"></textarea>

<button type="submit">Place Order</button>
</form>

<script>
// Load summary from localStorage
document.addEventListener("DOMContentLoaded", () => {
const bundleType = localStorage.getItem("bundleType") || "No bundle selected";
const bundlePrice = localStorage.getItem("bundlePrice") || "0 EUR";
document.getElementById("bundleName").textContent = "Selected: " + bundleType;
document.getElementById("bundlePrice").textContent = "Price: " + bundlePrice;
});

document.getElementById("checkout-form").addEventListener("submit", async (e) => {
e.preventDefault();

const name = document.getElementById("name").value;
const email = document.getElementById("email").value;
const phone = document.getElementById("phone").value;
const address = document.getElementById("address").value;
const city = document.getElementById("city").value;
const postal = document.getElementById("postal").value;
const country = document.getElementById("country").value;
const delivery = document.getElementById("delivery").value;
const additionalInfo = document.getElementById("additionalInfo").value;
const bundleType = localStorage.getItem("bundleType");
const bundlePrice = localStorage.getItem("bundlePrice");

const orderData = {
name,
email,
phone,
address,
city,
postal,
country,
delivery,
bundleType,
bundlePrice,
additionalInfo
};

try {
const response = await fetch("/api/sendEmail", {
method: "POST",
headers: { "Content-Type": "application/json" },
body: JSON.stringify(orderData)
});

const data = await response.json();

if (response.ok) {
window.location.href = "thankyou.html";
} else {
console.error("Server error:", data);
alert("Something went wrong. Please try again.");
}
} catch (error) {
console.error("Request failed:", error);
alert("Error sending order. Please try again later.");
}
});
</script>
</body>
</html>
	
