<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Checkout</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<img src="logo.jpeg" alt="Adi’s Choice" class="logo">

<h1>Checkout</h1>

<!-- ORDER SUMMARY -->
<div class="box">
<h2>Order summary</h2>
<ul id="summary"></ul>
<p><strong>Total: <span id="total">0</span> €</strong></p>
</div>

<!-- FORM -->
<form id="orderForm" class="box">

<!-- hidden order data -->
<input type="hidden" name="Order summary" id="summaryInput">
<input type="hidden" name="Total (€)" id="totalInput">

<!-- CUSTOMER DETAILS -->
<input type="text" name="Name" placeholder="Full name" required>
<input type="email" name="Email" placeholder="Email address" required>
<input type="tel" name="Phone" placeholder="Phone number" required>
<input type="text" name="Address" placeholder="Full delivery address" required>

<!-- DELIVERY -->
<label>
Delivery method:
<select name="Delivery" required>
<option value="">Select delivery</option>
<option value="InPost">InPost</option>
<option value="GLS">GLS</option>
<option value="DHL">DHL</option>
<option value="DPD">DPD</option>
<option value="Postal service">Postal service</option>
<option value="Other">Other (see notes)</option>
</select>
</label>

<!-- EXTRA OPTIONS (PRZYWRÓCONE) -->
<input type="text" name="Preferred color" placeholder="Preferred color (optional)">
<input type="text" name="Promo code" placeholder="Promo / discount code (optional)">

<textarea name="Notes" placeholder="Additional notes" rows="4"></textarea>

<button type="submit">Place order</button>
</form>

<script>
// ===== SUMMARY FROM INDEX =====
const params = new URLSearchParams(window.location.search);
const summaryList = document.getElementById("summary");

let total = 0;
let summaryText = [];

function addItem(param) {
if (!param) return;
const [name, price] = param.split("|");
total += parseInt(price);
summaryText.push(`${name} – ${price} €`);

const li = document.createElement("li");
li.textContent = `${name} – ${price} €`;
summaryList.appendChild(li);
}

addItem(params.get("standard"));
addItem(params.get("super_single"));
addItem(params.get("super_pack"));
addItem(params.get("premium"));

document.getElementById("total").textContent = total;
document.getElementById("summaryInput").value = summaryText.join(" | ");
document.getElementById("totalInput").value = total;

// ===== FORM SUBMIT =====
document.getElementById("orderForm").addEventListener("submit", function(e) {
e.preventDefault();

fetch("https://formspree.io/f/xnngvjaz", {
method: "POST",
body: new FormData(this),
headers: { "Accept": "application/json" }
})
.then(() => {
window.location.href = "thankyou.html";
})
.catch(() => {
alert("Something went wrong. Please try again.");
});
});
</script>

</body>
</html>